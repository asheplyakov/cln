# Makefile for cln/doc

#### Start of system configuration section. ####

# Directories used by "make":
srcdir = @srcdir@

# Directories used by "make install":
prefix = @prefix@
local_prefix = /usr/local
exec_prefix = @exec_prefix@
datarootdir = @datarootdir@
datadir = @datadir@
infodir = @infodir@
mandir = @mandir@
htmldir = $(datadir)/html
dvidir = $(datadir)/dvi
DESTDIR =

# Programs used by "make":
RM = rm -f
MKDIR = mkdir -p
@SET_MAKE@

# Programs used by "make" if you have changed the documentation files:
TEX = tex
TEXI2DVI = texi2dvi
DVIPS = dvips -D600
MAKEINFO = LANGUAGE= makeinfo
TEXI2HTML = texi2html
EMACS = emacs

# Programs used by "make install":
INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@

#### End of system configuration section. ####

PACKAGE = cln

SHELL = /bin/sh

VPATH = $(srcdir)

all : info dvi ps html


info : $(srcdir)/$(PACKAGE).info

$(srcdir)/$(PACKAGE).info : $(srcdir)/$(PACKAGE).texi
	cd $(srcdir) && $(MAKEINFO) --no-split $(PACKAGE).texi

$(srcdir)/$(PACKAGE).texi : $(srcdir)/$(PACKAGE).tex
	cp $< $@
	$(EMACS) -batch $@ -load addnodes.el -f save-buffer
	mv $@ $@~
	sed -e 's,@detailmenu,,g' -e 's,@end detailmenu,,g' < $@~ > $@
	$(RM) $@~


dvi : $(srcdir)/$(PACKAGE).dvi

$(srcdir)/$(PACKAGE).dvi : $(srcdir)/$(PACKAGE).texi
	cd $(srcdir) && $(TEXI2DVI) $(PACKAGE).texi


ps : $(srcdir)/$(PACKAGE).ps

$(srcdir)/$(PACKAGE).ps : $(srcdir)/$(PACKAGE).dvi
	$(DVIPS) -o $@ $<


html : $(PACKAGE).html $(PACKAGE)_toc.html

$(PACKAGE).html : $(srcdir)/$(PACKAGE).texi
	cd $(srcdir) && $(TEXI2HTML) -expandinfo -number -monolithic $(PACKAGE).texi

$(PACKAGE)_toc.html : $(srcdir)/$(PACKAGE).texi
	cd $(srcdir) && $(TEXI2HTML) -expandinfo -number -split_chapter $(PACKAGE).texi


install : all installdirs force
	$(INSTALL_DATA) $(srcdir)/$(PACKAGE).info $(DESTDIR)$(infodir)/$(PACKAGE).info
	@if (install-info --version && \
	     install-info --version 2>&1 | sed 1q | fgrep -i -v debian) >/dev/null 2>&1; then \
	  echo " install-info --info-dir=$(DESTDIR)$(infodir) $(DESTDIR)$(infodir)/$(PACKAGE).info";\
	  install-info --info-dir=$(DESTDIR)$(infodir) $(DESTDIR)$(infodir)/$(PACKAGE).info || :;\
	else : ; fi
	$(INSTALL_DATA) $(srcdir)/$(PACKAGE)_*.html $(DESTDIR)$(htmldir)
	$(INSTALL_DATA) $(srcdir)/$(PACKAGE).dvi $(DESTDIR)$(dvidir)/$(PACKAGE).dvi

installdirs : force
	$(MKDIR) $(DESTDIR)$(datadir)
	$(MKDIR) $(DESTDIR)$(infodir)
	$(MKDIR) $(DESTDIR)$(htmldir)
	$(MKDIR) $(DESTDIR)$(dvidir)

uninstall : force
	@if (install-info --version && \
	     install-info --version 2>&1 | sed 1q | fgrep -i -v debian) >/dev/null 2>&1; then \
	  echo " install-info --info-dir=$(DESTDIR)$(infodir) --remove $(DESTDIR)$(infodir)/$(PACKAGE).info"; \
	  install-info --info-dir=$(DESTDIR)$(infodir) --remove $(DESTDIR)$(infodir)/$(PACKAGE).info; \
	else :; fi
	$(RM) $(DESTDIR)$(infodir)/$(PACKAGE).info
	$(RM) $(DESTDIR)$(htmldir)/$(PACKAGE)_*.html
	$(RM) $(DESTDIR)$(dvidir)/$(PACKAGE).dvi

check : all

mostlyclean : clean

clean : force
	$(RM) *~ *.aux *.toc *.cp *.fn *.ky *.pg *.tp *.vr *.my *.mys *.log core

distclean : clean
	$(RM) Makefile

maintainer-clean : distclean
	$(RM) *.info *.dvi *.ps *.html
	if [ -f $(PACKAGE).tex ] ; then $(RM) $(PACKAGE).texi ; fi

force :

